<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>MVC PAGES</title>

    <!-- Welcome to ZIM at http://zimjs.com - Code Interactive Media Pizzazz! 				-->
    <!-- ZIM runs on the HTML Canvas powered by JavaScript and CreateJS http://createjs.com -->
    <!-- Founded by Inventor Dan Zen - http://danzen.com - Canadian New Media Award Winner 	-->
    <!-- ZIM is free to use. You can donate to help improve ZIM at http://zimjs.com/donate 	-->

    <!-- as of ZIM 4.3.0 load createjs namespace first -->
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
        var zon = true; // true for comments from zim code
    </script>
    <script src="https://d309knd7es5f10.cloudfront.net/zim_5.js"></script>
    <!-- add _doc to see code -->
    <!-- use zimjs.com/code/distill for minified individual functions! -->

    <!-- <script src="code/view.js"></script>
<script src="code/controller.js"></script> -->
    <script>

        var scaling = "full"; // makes stage the window size but does not scale content
        var width = null;
        var height = null;
        var color = "#FAFAFA";

        var frame = new zim.Frame(scaling, width, height, color); // see docs for more options and info
        frame.on("ready", function() {
            zog("ready from ZIM Frame");

            var stage = frame.stage;
            var stageW = frame.width;
            var stageH = frame.height;

           
            frame.loadAssets([
                "1.png",
                "2.png",
                "3.png",
                "4.png",
                "5.png",
                "icon.png",
            ], "assets/");

            frame.on("complete", function() {

                var loader = new zim.Loader({
                        frame: frame,
                        label: new zim.Label({
                            text: "",
                            align: "center",
                            size: 20,
                            backing:frame.asset("icon.png")

                        }),
                        corner: 20,
                        width: 200,
                        height: 200
                    })
                    .centerReg(stage);
                    loader.y=330;
                    loader.backing.alpha=0;
                
                // var drop = frame.asset("icon.png");
                 
                
               var photo;

               loader.on("loaded", function(e) {
                    // zim.loop(e.bitmaps,function(bitmap){
                         
                    var bitmap = e.bitmap;
                    photo = new zim.Container(bitmap.width,bitmap.height);
                    
                    bitmap.addTo(photo);
                    filter.centerReg(photo);
                     // .drag({onTop:false})
                    photo.scaleTo(stage,80,80).centerReg(stage,true,0);
                     // .scale(.7);
                     // zog(bitmap.scaleX);
                    filter.scaleTo(photo,100,100,"both",true);
                    // filter2.scaleTo(bitmap,bitmap.scaleX*100,bitmap.scaleX*100,"both");
                    // filter3.scaleTo(bitmap,bitmap.scaleX*100,bitmap.scaleX*100,"both");

                        // })

                    loader.removeFrom(stage);
                    stage.update();
                });



    // // 1. make assets that the tabs will sit above (or next to)
    var page = new zim.Rectangle(500, 100, "black");
    page.centerReg(stage);
    page.mouseChildren = true;
    page.y = 660;

   
    
    var picker = new zim.ColorPicker({
        colors:[frame.pink,frame.blue,frame.green,frame.yellow,frame.orange],
        cols:5,
        width:400,
        greyPicker:false,
        alphaPicker:false,
        buttonBar:false,
        spacing:15,
        circles:true,
        drag:false,
    });
    picker.selectedIndex = -1;
    picker.centerReg(page);
    picker.on("change", function(e) {
        filter.color = picker.selectedColor;
        zog(picker.selectedColor);
        zog(filter.alpha = 0.3);
        stage.update();
       
    });
    stage.update();
     

////////////////////////////////////////////////////////////////////////////
///////////////////////////////Stickers/////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
               
                var container = new zim.Container();
                
                zim.loop(5,function(i){
                  
                  frame.asset((i+1)+".png")
                    .centerReg(container)
                    .scale(.35)
                    .pos(50+80*i,50);
        
                 
                  // container.addChild(pic1);
                  // pic1.scale(.4);
                  // pic1.x = 50;
                
                })
                
                // var pic1 = frame.asset("1.png");
                // container.addChild(pic1);
                // pic1.scale(.4);
                // pic1.x = 50;
                

              
                 
////////////////////////////sticker Label//////////////////////////////////
                var stickerLabel = new zim.Label({
                   text:"Stickers",
                   size:20,
                   color:"black",
                   fontOptions:"bold",
                   rollColor:"MediumOrchid"
                });
                stickerLabel.center(stage);
                stickerLabel.x = 270;
                stickerLabel.y = 580;
                stickerLabel.on("click", function(){
                     container.centerReg(page);
                     page.removeChild(picker);
                     stage.update();
                });

////////////////////////////////////////////////////////////////////////////
///////////////////////////////filters//////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
                
                var filterHolder = new zim.Container();


                var filter = new zim.Rectangle(300,
                    300, frame.pink);
                filter.x = 0;
                filter.y = 0;
                filter.alpha = 0;
                // filter.centerReg(stage,true,0);
                // filter.color = "blue";

                // var filter2 = new zim.Rectangle(2000,
                //     2000, frame.blue);
                // filter2.x = 0;
                // filter2.y = 0;
                // filter2.alpha = 0;
                // filter2.centerReg(stage,true,0);
                
                

///////////////////////////////////////////////////////////  
////////////////////////Color Label////////////////////////
///////////////////////////////////////////////////////////               
               
                var label1 = new zim.Label({
                   text:"Pink",
                   size:20,
                   color:"pink",
                   fontOptions:"bold",
                   rollColor:"MediumOrchid"
                });
                label1.center(filterHolder);
                label1.x = 200;
                label1.y = 100;
                label1.on("click", function(){
                     // filter.centerReg(stage,true,0);
                   filter.alpha = 0.3;

                });

                var label2 = new zim.Label({
                   text:"Blue",
                   size:20,
                   color:"blue",
                   fontOptions:"bold",
                   rollColor:"MediumOrchid"
                });
                label2.center(filterHolder);
                label2.x = 160;
                label2.y = 150;
                label2.on("click", function(){
                     // filter.centerReg(stage,true,0);
                   filter2.alpha = 0.3;

                });

                var label3 = new zim.Label({
                   text:"Green",
                   size:20,
                   color:"green",
                   fontOptions:"bold",
                   rollColor:"MediumOrchid"
                });
                label3.center(filterHolder);
                label3.x = 180;
                label3.y = 200;
                label3.on("click", function(){
                     // filter.centerReg(stage,true,0);
                   filter3.alpha = 0.3;

                });

                var addFilter = new zim.Label({
                   text:"Filters",
                   size:20,
                   color:"black",
                   fontOptions:"bold",
                   rollColor:"MediumOrchid"
                });
                addFilter.center(stage);
                addFilter.x = 180;
                addFilter.y = 580;
                addFilter.on("click", function(){
                     // filter.centerReg(stage,true,0);
                 page.addChild(picker);
                 page.removeChild(container);
                 stage.update();

                });

                // filter.drag({onTop:false});


//////////////////////////////////////////////////////////////
///////////////////////////sticker drag///////////////////////               
//////////////////////////////////////////////////////////////
                container.drag({onTop: false});
                container.on("pressup",function(e){
                    var point = page.localToLocal(e.target.x,e.target.y,photo)
                    zog(photo.scaleX)
                    e.target.addTo(photo).drag().pos(point.x,point.y)
                    .scale(e.target.scaleX / photo.scaleX) 

                    stage.update();
                })
                // pic2.drag({onTop: false});
                // pic3.drag({onTop: false});
                // pic4.drag({onTop: false});
                // pic5.drag({onTop: false});

               stage.update();

            });/////end of the assets
        
        
        // var button3 = new zim.Button("CLICK");
        var backlabel = new zim.Label({
                    text:"restart",
                   size:20,
                   color:"black",
                   fontOptions:"bold",
                   // backing:frame.asset("icon.png")
                   
                });
        backlabel.center(stage);
        backlabel.y=50;
       
        backlabel.on("click", function() {
            zgo("edit.html");
        });

        }, null, true); // end of ready - only run once (true)
    </script>
</head>

<body>
    <!-- canvas with id="myCanvas" is made by zim Frame -->
</body>

</html>